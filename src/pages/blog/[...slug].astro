---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---
<BaseLayout title={entry.data.title}>
    <main class="py-16 md:py-24 bg-white">
        <article class="container mx-auto px-6 max-w-4xl">
            <!-- Post Header -->
            <header class="mb-8">
                <div class="mb-4">
                    <a href="/blog" class="text-green-700 hover:text-green-900 font-bold">&larr; Back to Blog</a>
                </div>
                <span class="bg-green-100 text-green-800 text-sm font-semibold mr-2 px-3 py-1 rounded-full">{entry.data.category}</span>
                <h1 class="text-4xl md:text-5xl font-bold text-stone-900 mt-4 mb-4">{entry.data.title}</h1>
                <div class="text-md text-stone-500">
                    <span>By {entry.data.author}</span> | <span>{entry.data.pubDate.toDateString()}</span>
                </div>
            </header>

            <!-- Featured Image -->
            <img src={entry.data.image} alt={`Featured image for ${entry.data.title}`} class="w-full h-auto rounded-lg shadow-lg mb-8">

            <!-- Post Content -->
            <div class="prose lg:prose-xl max-w-none text-stone-800 leading-relaxed">
                <Content />
            </div>
        </article>
    </main>
</BaseLayout>
